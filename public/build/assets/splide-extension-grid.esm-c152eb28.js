/*!
 * @splidejs/splide-extension-grid
 * Version  : 0.4.1
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */function ln(n){n.length=0}function G(n,t,i){return Array.prototype.slice.call(n,t,i)}function D(n){return n.bind.apply(n,[null].concat(G(arguments,1)))}function M(n,t){return typeof t===n}var on=Array.isArray;D(M,"function");D(M,"string");D(M,"undefined");function rn(n){return on(n)?n:[n]}function Q(n,t){rn(n).forEach(t)}var hn=Object.keys;function En(n,t,i){if(n){var o=hn(n);o=i?o.reverse():o;for(var a=0;a<o.length;a++){var s=o[a];if(s!=="__proto__"&&t(n[s],s)===!1)break}}return n}function gn(n){return G(arguments,1).forEach(function(t){En(t,function(i,o){n[o]=t[o]})}),n}var en="splide";function mn(){var n=[];function t(u,h,l,d){a(u,h,function(c,v,m){var p="addEventListener"in c,C=p?c.removeEventListener.bind(c,v,l,d):c.removeListener.bind(c,l);p?c.addEventListener(v,l,d):c.addListener(l),n.push([c,v,m,l,C])})}function i(u,h,l){a(u,h,function(d,c,v){n=n.filter(function(m){return m[0]===d&&m[1]===c&&m[2]===v&&(!l||m[3]===l)?(m[4](),!1):!0})})}function o(u,h,l){var d,c=!0;return typeof CustomEvent=="function"?d=new CustomEvent(h,{bubbles:c,detail:l}):(d=document.createEvent("CustomEvent"),d.initCustomEvent(h,c,!1,l)),u.dispatchEvent(d),d}function a(u,h,l){Q(u,function(d){d&&Q(h,function(c){c.split(" ").forEach(function(v){var m=v.split(".");l(d,m[0],m[1])})})})}function s(){n.forEach(function(u){u[4]()}),ln(n)}return{bind:t,unbind:i,dispatch:o,destroy:s}}var vn="visible",yn="hidden",V="refresh",pn="updated",$n="destroy";function sn(n){var t=n?n.event.bus:document.createDocumentFragment(),i=mn();function o(s,u){i.bind(t,rn(s).join(" "),function(h){u.apply(u,on(h.detail)?h.detail:[])})}function a(s){i.dispatch(t,s,G(arguments,1))}return n&&n.event.on($n,i.destroy),gn(i,{bus:t,on:o,off:D(i.unbind,t),emit:a})}var Cn=en,I=en+"__slide",_n=I+"__container";function X(n){n.length=0}function N(n,t,i){return Array.prototype.slice.call(n,t,i)}function P(n){return n.bind(null,...N(arguments,1))}function R(n,t){return typeof t===n}function An(n){return!J(n)&&R("object",n)}const U=Array.isArray;P(R,"function");const q=P(R,"string"),bn=P(R,"undefined");function J(n){return n===null}function Ln(n){return n instanceof HTMLElement}function K(n){return U(n)?n:[n]}function b(n,t){K(n).forEach(t)}function Z(n,t){return n.push(...K(t)),n}function un(n,t,i){n&&b(t,o=>{o&&n.classList[i?"add":"remove"](o)})}function H(n,t){un(n,q(t)?t.split(" "):t,!0)}function T(n,t){b(t,n.appendChild.bind(n))}function wn(n,t){return Ln(n)&&(n.msMatchesSelector||n.matches).call(n,t)}function On(n,t){const i=n?N(n.children):[];return t?i.filter(o=>wn(o,t)):i}function j(n,t){return t?On(n,t)[0]:n.firstElementChild}const cn=Object.keys;function fn(n,t,i){if(n){let o=cn(n);o=i?o.reverse():o;for(let a=0;a<o.length;a++){const s=o[a];if(s!=="__proto__"&&t(n[s],s)===!1)break}}return n}function Tn(n){return N(arguments,1).forEach(t=>{fn(t,(i,o)=>{n[o]=t[o]})}),n}function Dn(n,t){K(t||cn(n)).forEach(i=>{delete n[i]})}function B(n,t){b(n,i=>{b(t,o=>{i&&i.removeAttribute(o)})})}function z(n,t,i){An(t)?fn(t,(o,a)=>{z(n,a,o)}):b(n,o=>{J(i)||i===""?B(o,t):o.setAttribute(t,String(i))})}function k(n,t,i){const o=document.createElement(n);return t&&(q(t)?H(o,t):z(o,t)),i&&T(i,o),o}function y(n,t,i){if(bn(i))return getComputedStyle(n)[t];J(i)||(n.style[t]=`${i}`)}function In(n,t){return n&&n.classList.contains(t)}function Nn(n){b(n,t=>{t&&t.parentNode&&t.parentNode.removeChild(t)})}function nn(n,t){return t?N(n.querySelectorAll(t)):[]}function tn(n,t){un(n,t,!1)}function O(n){return q(n)?n:n?`${n}px`:""}const Rn="splide";function xn(n,t){if(!n)throw new Error(`[${Rn}] ${t||""}`)}const{min:Sn,max:Gn,floor:Mn,ceil:Pn,abs:Un}=Math;function Vn(n){return n<10?`0${n}`:`${n}`}const an=`${I}__row`,F=`${I}--col`,Hn={rows:1,cols:1,dimensions:[],gap:{}};function Bn(n){function t(){const{rows:a,cols:s,dimensions:u}=n;return U(u)&&u.length?u:[[a,s]]}function i(a){const s=t();return s[Sn(a,s.length-1)]}function o(a){const s=t();let u,h,l=0;for(let d=0;d<s.length;d++){const c=s[d];if(u=c[0]||1,h=c[1]||1,l+=u*h,a<l)break}return xn(u&&h,"Invalid dimension"),[u,h]}return{get:i,getAt:o}}function Fn(n,t,i){const{on:o,destroy:a}=sn(n),{Components:s,options:u}=n,{resolve:h}=s.Direction,{forEach:l}=s.Slides;function d(){v(),u.slideFocus&&(o(vn,x),o(yn,S))}function c(){l(e=>{const{slide:f}=e;L(f,!1),w(f).forEach(r=>{B(r,"style")}),A(f).forEach(r=>{C(r,!0),B(r,"style")})}),a()}function v(){l(e=>{const{slide:f}=e,[r,E]=i.get(e.isClone?e.slideIndex:e.index);m(r,f),p(E,f),A(e.slide).forEach((g,$)=>{g.id=`${e.slide.id}-col${Vn($+1)}`,n.options.cover&&C(g)})})}function m(e,f){const{row:r}=t.gap,E=`calc(${100/e}%${r?` - ${O(r)} * ${(e-1)/e}`:""})`;w(f).forEach((g,$,_)=>{y(g,"height",E),y(g,"display","flex"),y(g,"margin",`0 0 ${O(r)} 0`),y(g,"padding",0),$===_.length-1&&y(g,"marginBottom",0)})}function p(e,f){const{col:r}=t.gap,E=`calc(${100/e}%${r?` - ${O(r)} * ${(e-1)/e}`:""})`;A(f).forEach((g,$,_)=>{y(g,"width",E),$!==_.length-1&&y(g,h("marginRight"),O(r))})}function C(e,f){const r=j(e,`.${_n}`),E=j(r||e,"img");E&&E.src&&(y(r||e,"background",f?"":`center/cover no-repeat url("${E.src}")`),y(E,"display",f?"":"none"))}function w(e){return nn(e,`.${an}`)}function A(e){return nn(e,`.${F}`)}function L(e,f){A(e).forEach(r=>{z(r,"tabindex",f?0:null)})}function x(e){L(e.slide,!0)}function S(e){L(e.slide,!1)}return{mount:d,destroy:c}}function qn(n,t,i){const{on:o,off:a}=sn(n),{Elements:s}=t,u={},h=Bn(u),l=Fn(n,u,h),d=`${Cn}--grid`,c=[];function v(){m(),o(pn,m)}function m(){Dn(u),Tn(u,Hn,i.grid||{}),S()?(p(),Z(c,s.slides),H(n.root,d),T(s.list,A()),a(V),o(V,w),C()):e()&&(p(),C())}function p(){if(e()){const{slides:f}=s;l.destroy(),c.forEach(r=>{tn(r,F),T(s.list,r)}),Nn(f),tn(n.root,d),X(f),Z(f,c),X(c),a(V)}}function C(){n.refresh()}function w(){e()&&l.mount()}function A(){const f=[];let r=0,E=0,g,$;return c.forEach((_,dn)=>{const[W,Y]=h.getAt(dn);E||(r||(g=k(_.tagName,I),f.push(g)),$=L(W,_,g)),x(Y,_,$),++E>=Y&&(E=0,r=++r>=W?0:r)}),f}function L(f,r,E){const g=r.tagName.toLowerCase()==="li"?"ul":"div";return k(g,an,E)}function x(f,r,E){return H(r,F),T(E,r),r}function S(){if(i.grid){const{rows:f,cols:r,dimensions:E}=u;return f>1||r>1||U(E)&&E.length>0}return!1}function e(){return In(n.root,d)}return{mount:v,destroy:p}}export{qn as G};
